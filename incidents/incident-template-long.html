<h1 class="minor">Github notifications unavailable</h1>
<article>
    <h2>Postmortem</h2>
    <p>
        On 11.09.2024 12:30 UTC we noticed that the AEM Code Sync Github application has 
        stopped dispatching github events since 05:00 UTC. As a result, github actions that 
        are triggered on a repository_dispatch event were not longer invoked. 
    </p>
    <p>
        The reason was a removed content-write permission of the AEM Code Sync Github 
        application which is required to dispatch events. After restoring the permission, 
        the notifications were dispatched again. 
    </p>
    <p>
        Customers that use repository_dispatch events in their github actions need to 
        approve the altered permissions. The organization admins should have received 
        an email from github.
    </p>
    <h3>Executive Summary</h3>
    <p>
        On December 11, 2024, between 4:30 PM and 7:00 PM UTC, a single customer experienced a service
        disruption affecting their internal traffic routing to Adobe Experience Manager. The incident 
        was caused by a configuration change in our content delivery infrastructure that interacted 
        unexpectedly with the customer's network security setup (zScaler). The issue was identified 
        and resolved, with no impact to other Adobe Experience Manager customers.
        Other zScaler customers were not affected by the issue.
    </p>
    <h3>Incident Timeline</h3>
    <p>
        The incident began at 4:29 PM UTC when our team implemented a configuration change to enable 
        optional mTLS on the Edge Delivery Services CDN. At 4:52 PM UTC, Adobe observed a service 
        disruption and informed the affected customer. An incident response team was formed from 
        5:40 PM UTC and began a thorough investigation.
    </p>
    <p>
        At 7:05 PM UTC the customer disabled zScaler's traffic inspection and while traffic resumed, 
        no root cause has been identified yet. At 7:43 PM UTC the initial configuration change on 
        mTLS was rolled back, but root cause analysis was not yet completed.
    </p>
    <p>
        After analysis, at 9:45 PM UTC, the team identified the root cause as an unexpected interaction 
        between our new mTLS configuration and the customer's zScaler security setup. We then worked with 
        the customer to verify service restoration, confirmed at 9:50 PM UTC.
    </p>
    <h3>Impact Analysis</h3>
    <p>
        For 2.5 hours, Edge Delivery Services experienced a global traffic drop of about 1%. 
        This was not due to service unavailability or degraded performance, but a single customer 
        ceasing requests due to internal network configuration blocking.
    </p>
    <h3>Root Cause Analysis</h3>
    <p>
        Enabling Mutual Transport Layer Security (mTLS) authentication on our Edge Delivery Services 
        (aem.live) infrastructure triggered the incident.
    </p>
    <p>
        Although the CDN didn't enforce mutual TLS, only clients with a client certificate would interact 
        with the new security layer. However, this created an unexpected interaction with zScaler's traffic 
        inspection that cannot inspect traffic using mTLS, even if unenforced. This limitation was not 
        documented in zScaler's architecture guide to TLS inspection and unknown to the Adobe team.
    </p>
    <p>
        An unconventional setup combined zScaler inspection and enforcement, an on-site HTTP server 
        proxying Edge Delivery Services, and a little-known mTLS support limitation. This led to a 
        severe impact for internal users of a single customer and localized sites using the same HTTP 
        server as a translation service origin.
    </p>
    <h3>Resolution</h3>
    <p>
        Our priority was establishing a joint incident response team with Adobe engineers and the 
        customer's network operations staff. This collaboration was crucial for quick problem resolution.
    </p>
    <p>
        We identified two potential paths to restore service. The customer's team temporarily disabled 
        their TLS inspection - a security feature that checks data for threats as it passes through 
        their network - as a workaround, while our infrastructure team prepared to roll back the mTLS 
        configuration changes. To minimize downtime, we pursued both in parallel.
    </p>
    <p>
        After implementing these changes, we conducted thorough verification testing with the customer's 
        team. This included monitoring traffic patterns and confirming functionality across all affected 
        services until we confirmed full service restoration.
    </p>
    <h3>Incident Response Readiness</h3>
    <p>
        A simultaneous outage of our Single-Sign-On (SSO) infrastructure hindered our response and analysis of the incident.
    </p>
    <h3>Whatâ€™s next?</h3>
        
    We have identified the following key action items to prevent similar incidents and improve our response capabilities:

    <h4>Monitoring and alerting improvements</h4>

    <ol>
        <li>
            Implement alerts for significant traffic drops for single domains
        </li>
        <li>
            Automatically tag CDN (Content Delivery Network)/TLS (Transport Layer Security)/DNS (Domain Name System) changes in our logging, in addition to release tagging
        </li>
    </ol>

    <h4>Documentation and change management</h4>
    <ol>
        <li>
            Document unsupported CDNs and other clients and possible adverse effects
        </li>
        <li>
            Add Fastly and Cloudflare configuration changes to release history tracking
        </li>
        <li>
            Update runbook with instructions on documenting significant CDN/TLS/DNS configuration changes
        </li>
    </ol>
    <h4>Security and access management</h4>
    <ol>
        <li>
            Establish backup authentication methods for critical systems independent of Single Sign-On (SSO)
        </li>
    </ol>
    <h4>Technical remediation</h4>
    <ol>
        <li>
            Remove mTLS configuration from all systems
        </li>
        <li>
            Update configuration service to remove mTLS options
        </li>
        <li>
            Revise technical documentation to reflect changes
        </li>
    </ol>
    <h4>Communication and process improvements</h4>
    <ol>
        <li>
            Review and enhance customer communication protocols
        </li>
        <li>
            Establish clear escalation paths for similar incidents
        </li>
        <li>
            Review and update support ticket escalation procedures
        </li>
        <li>
            We've assigned owners and deadlines to each action item to ensure timely completion of these improvements.
        </li>
    </ol>
    <time></time>    
</article>

<ul class="updates">
    <li>
        <h2>Resolved</h2>
        <p>This incident has been resolved.</p>
        <time></time>
    </li>

    <li>
        <h2>Monitoring</h2>
        <p>
            The relevant permission needed for the github events have been updated and the notifications are dispatched again. 
            Customers that use repository_dispatch events in their github actions need to approve the altered permissions. 
            The organization admins should have received an email from github.
        </p>
        <time></time>
    </li>

    <li>
        <h2>Identified</h2>
        <p>
            On 11.09.2024 UTC 05:00, the AEM Code Sync Github application stopped dispatching github events. 
            As a result, github actions that are triggered on a repository_dispatch event are not longer invoked.
            <br>
            <br>
            We have identified the root cause and are working on a solution.
        </p>
        <time></time>
    </li>
</ul>
</div>
